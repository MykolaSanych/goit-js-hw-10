{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst buttonStart = document.getElementsByTagName('button')[0];\nconst timerDisplay = document.querySelectorAll('.value');\nlet userSelectedDate;\nconst days = timerDisplay[0];\nconst hours = timerDisplay[1];\nconst minutes = timerDisplay[2];\nconst seconds = timerDisplay[3];\nlet buttonActive = false;\nconst input = document.getElementById('datetime-picker');\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    if (Date.now() >= selectedDates[0].getTime()) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      buttonActive = false;\n      buttonStart.classList.remove('active-button');\n    } else {\n      userSelectedDate = Date.parse(selectedDates);\n      buttonStart.classList.add('active-button');\n      buttonActive = true;\n    }\n  },\n};\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\nfunction addLeadingZero(value) {\n  for (let key in value) {\n    value[key] = String(value[key]).padStart(2, '0');\n  }\n  return value;\n}\n\nflatpickr('#datetime-picker', options);\n\nfunction timer() {\n  input.disabled = true;\n  if (buttonActive) {\n    buttonActive = false;\n    buttonStart.classList.remove('active-button');\n    const timerId = setInterval(() => {\n      const setTime = userSelectedDate - Date.now();\n      const rightTime = addLeadingZero(convertMs(setTime));\n      days.innerHTML = rightTime.days;\n      hours.innerHTML = rightTime.hours;\n      minutes.innerHTML = rightTime.minutes;\n      seconds.innerHTML = rightTime.seconds;\n      if (setTime <= 1000) {\n        clearInterval(timerId);\n        input.disabled = false;\n      }\n    }, 1000);\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n    });\n  }\n}\n\nbuttonStart.addEventListener('click', timer);\n"],"names":["buttonStart","timerDisplay","userSelectedDate","days","hours","minutes","seconds","buttonActive","input","options","selectedDates","iziToast","convertMs","ms","addLeadingZero","value","key","flatpickr","timer","timerId","setTime","rightTime"],"mappings":"0IAIA,MAAMA,EAAc,SAAS,qBAAqB,QAAQ,EAAE,CAAC,EACvDC,EAAe,SAAS,iBAAiB,QAAQ,EACvD,IAAIC,EACJ,MAAMC,EAAOF,EAAa,CAAC,EACrBG,EAAQH,EAAa,CAAC,EACtBI,EAAUJ,EAAa,CAAC,EACxBK,EAAUL,EAAa,CAAC,EAC9B,IAAIM,EAAe,GACnB,MAAMC,EAAQ,SAAS,eAAe,iBAAiB,EACjDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EACxB,KAAK,IAAK,GAAIA,EAAc,CAAC,EAAE,WACjCC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,UAClB,CAAO,EACDJ,EAAe,GACfP,EAAY,UAAU,OAAO,eAAe,IAE5CE,EAAmB,KAAK,MAAMQ,CAAa,EAC3CV,EAAY,UAAU,IAAI,eAAe,EACzCO,EAAe,GAElB,CACH,EACA,SAASK,EAAUC,EAAI,CAQrB,MAAMV,EAAO,KAAK,MAAMU,EAAK,KAAG,EAE1BT,EAAQ,KAAK,MAAOS,EAAK,MAAO,IAAI,EAEpCR,EAAU,KAAK,MAAQQ,EAAK,MAAO,KAAQ,GAAM,EAEjDP,EAAU,KAAK,MAASO,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CACA,SAASQ,EAAeC,EAAO,CAC7B,QAASC,KAAOD,EACdA,EAAMC,CAAG,EAAI,OAAOD,EAAMC,CAAG,CAAC,EAAE,SAAS,EAAG,GAAG,EAEjD,OAAOD,CACT,CAEAE,EAAU,mBAAoBR,CAAO,EAErC,SAASS,GAAQ,CAEf,GADAV,EAAM,SAAW,GACbD,EAAc,CAChBA,EAAe,GACfP,EAAY,UAAU,OAAO,eAAe,EAC5C,MAAMmB,EAAU,YAAY,IAAM,CAChC,MAAMC,EAAUlB,EAAmB,KAAK,IAAG,EACrCmB,EAAYP,EAAeF,EAAUQ,CAAO,CAAC,EACnDjB,EAAK,UAAYkB,EAAU,KAC3BjB,EAAM,UAAYiB,EAAU,MAC5BhB,EAAQ,UAAYgB,EAAU,QAC9Bf,EAAQ,UAAYe,EAAU,QAC1BD,GAAW,MACb,cAAcD,CAAO,EACrBX,EAAM,SAAW,GAEpB,EAAE,GAAI,CACX,MACIG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,UAChB,CAAK,CAEL,CAEAX,EAAY,iBAAiB,QAASkB,CAAK"}